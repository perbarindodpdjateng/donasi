<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Form Donasi</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;font-size:13px;margin:0;padding:12px;background:transparent}
    .container{max-width:480px;margin:auto;background:transparent;padding:16px 18px;border-radius:8px;box-shadow:0 0 6px rgba(0,0,0,.28)}
    label{font-weight:bold;display:block;font-size:12px;margin:5px 0}
    input[type=text],input[type=number]{width:100%;padding:7px;margin-bottom:5px;border:1px solid #ccc;border-radius:4px;font-size:13px;box-sizing:border-box}
    input[type=submit]{width:100%;padding:10px;font-size:13px;background:#007bff;color:#fff;border:none;border-radius:4px;font-weight:bold;cursor:pointer;margin-top:5px}
    input[type=submit]:hover{background:#0056b3}
    #responseMessage{margin-top:10px;font-size:13px;text-align:center}
    .success{color:green}.error{color:red}
    /* Progress bar */
    #progressWrapper{display:none;margin-top:10px}
    #progressBar{width:100%;height:6px;background:#e0e0e0;border-radius:3px;overflow:hidden}
    #progressBar>div{height:100%;width:0;background:#007bff;transition:width .3s}
    /* Efek BLINK untuk pesan sukses */
    @keyframes blink{50%{opacity:0}}
    .blink{animation:blink 1s step-end infinite}
  </style>
</head>
<body>
  <div class="container">
    <form id="donasiForm">
      <label>Nama Donatur:</label>
      <input type="text" id="nama" name="nama" required>

      <label>Nomor WhatsApp:</label>
      <input type="text" id="whatsapp" name="whatsapp" required>

      <label>Nominal Donasi (Rp):</label>
      <input type="number" id="nominal" name="nominal" required>

      <input type="submit" value="Kirim Donasi">
    </form>

    <!-- Progress bar -->
    <div id="progressWrapper">
      <div id="progressBar"><div></div></div>
      <p style="margin:4px 0 0;font-size:11px;color:#555">Mengirim data…</p>
    </div>

    <div id="responseMessage"></div>
  </div>

  <script>
  document.getElementById("donasiForm").addEventListener("submit",function(e){
    e.preventDefault();
    const nama     = document.getElementById("nama").value.trim();
    const whatsapp = document.getElementById("whatsapp").value.trim();
    const nominal  = document.getElementById("nominal").value;
    if(!nama||!whatsapp||!nominal){alert("Semua field harus diisi.");return}

    const body={nama,whatsapp,nominal};

    // Tampilkan progress & reset pesan
    const progressWrapper = document.getElementById("progressWrapper");
    const progressFill    = document.querySelector("#progressBar>div");
    const msgBox          = document.getElementById("responseMessage");
    progressWrapper.style.display="block";
    msgBox.textContent="";
    msgBox.className="";

    // Animasi progress dummy (0→90 %)
    let width=0, interval=setInterval(()=>{
      if(width>=90){clearInterval(interval);return}
      width+=15;
      progressFill.style.width=width+"%";
    },100);

    fetch("https://script.google.com/macros/s/AKfycbzDEU_aR6bNxhmowf1YNPUbn8AXhn7pc-mHY7a1k8TT1mUDo7vFXGF8go0qCTYywkllCQ/exec",{
      method:"POST",
      body:JSON.stringify(body)
    })
    .then(r=>r.text())
    .then(r=>{
      clearInterval(interval);
      progressFill.style.width="100%";
      setTimeout(()=>{
        progressWrapper.style.display="none";
        msgBox.textContent="Terima kasih! Data donasi telah kami terima.";
        msgBox.className="success blink";   // ← tambahkan class blink
        document.getElementById("donasiForm").reset();
      },300);
    })
    .catch(err=>{
      clearInterval(interval);
      progressWrapper.style.display="none";
      msgBox.textContent="Gagal mengirim data.";
      msgBox.className="error";
    });
  });
  </script>
</body>
</html>
